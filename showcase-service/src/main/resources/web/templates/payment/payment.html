<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ | GeekStore</title>
  <link rel="icon" type="image/png" th:href="@{/images/favicon.ico}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/styles/base.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/styles/components.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/styles/layout.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/styles/payment/payment.css}">

  <th:block th:include="~{../fragments/header :: header-head}"></th:block>
  <th:block th:include="~{../fragments/footer :: footer-head}"></th:block>

  <script type="text/javascript" th:src="@{/scripts/payment/payment.js}"></script>
</head>
<body>
<div th:replace="~{../fragments/header :: header}"></div>

<main class="main">
  <div class="container payment-container">
    <div class="payment-card">
      <div class="payment-header">
        <div class="payment-icon">üí≥</div>
        <h2>–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</h2>
        <p>–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π –∫–∞—Ä—Ç—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏</p>
      </div>

      <div class="order-info">
        <div class="info-row">
          <span class="info-label">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</span>
          <span class="info-value" th:text="${order.uuid}"></span>
        </div>
        <div class="info-row">
          <span class="info-label">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</span>
          <span class="info-value" th:text="${#temporals.format(order.createdAt, 'dd.MM.yyyy HH:mm')}"></span>
        </div>
        <div class="info-row">
          <span class="info-label">–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:</span>
          <span class="info-value total-value" th:text="${#numbers.formatDecimal(order.totalPrice, 1, 2, 'COMMA')} + ' ‚ÇΩ'"></span>
        </div>
      </div>

      <form th:action="@{/payment/{orderUuid}/checkout(orderUuid=${order.uuid})}" method="post" class="payment-form">
        <div class="form-group">
          <label for="cardNumber" class="form-label">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</label>
          <div class="card-input">
            <span class="card-prefix">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
            <input type="text"
                   id="cardNumber"
                   name="cardNumber"
                   class="card-number"
                   placeholder="1234 5678 9012 3456"
                   maxlength="16"
                   pattern="\d{16}"
                   required>

          </div>
          <small class="text-sm text-gray">–í–≤–µ–¥–∏—Ç–µ 16 —Ü–∏—Ñ—Ä –Ω–æ–º–µ—Ä–∞ –≤–∞—à–µ–π –∫–∞—Ä—Ç—ã</small>
        </div>

        <div class="payment-actions">
          <a href="/products" class="btn btn-outline">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω</a>
          <button type="submit" class="btn btn-primary"
                  th:classappend="${!paymentServiceActive} ? 'btn-disabled'"
                  th:disabled="${!paymentServiceActive}">
            <span>–û–ø–ª–∞—Ç–∏—Ç—å</span>
          </button>
        </div>

        <div class="service-status" th:if="${balanceSufficient != null and !balanceSufficient}">
          <div class="alert alert-warning">
            <span>‚ö†Ô∏è</span>
            <p>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å.</p>
          </div>
        </div>

        <div class="service-status mt-4" th:if="${!paymentServiceActive}">
          <div class="alert alert-warning">
            <span>‚ö†Ô∏è</span>
            <p>–°–µ—Ä–≤–∏—Å –æ–ø–ª–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
          </div>
        </div>
      </form>

      <div class="secure-payment">
        <span class="secure-icon">üîí</span>
        <span>–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞. –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã.</span>
      </div>
    </div>
  </div>
</main>

<div th:replace="~{../fragments/footer :: footer}"></div>
</body>
</html>
